<div *ngFor="let feature of featureRows.flat()" class="fg-grid-item card-padding">
  <div class="fg-grid-item-text">
    <div *ngIf="feature.title" class="fg-feature-title-section">
      <img *ngIf="feature.iconURL" [src]="feature.iconURL" alt="" />
      <h3>{{ feature.title }}</h3>
      <td-tag-chips [tags]="feature.tags" />
    </div>

    <td-rich-text *ngIf="feature.body" [value]="feature.body" />

    <div *ngIf="feature.links?.length" class="fg-links-section">
      <a *ngFor="let link of feature.links" class="link-tertiary" [tdLink]="link">{{ link.text }}</a>
    </div>
  </div>

  <td-aspect-ratio *ngIf="hasMediaIllustration(feature)" ratio="16:9">
    <td-illustration [illustration]="$any(feature.illustration)" [isBlurred]="feature.isIllustrationBlurred" />
  </td-aspect-ratio>
  <div *ngIf="hasShortCodeSnippet(feature)" class="fg-code-short-container">
    <pre
      class="fg-code-short"
      [class.fg-blur]="feature.isIllustrationBlurred"
    ><code [class]="'language-' + $any(feature.illustration).language">{{ $any(feature.illustration).code }}</code></pre>
    <button
      *ngIf="!feature.isIllustrationBlurred"
      class="fg-copy-button"
      title="Copy to clipboard"
      (click)="writeToClipboard($event, $any(feature.illustration).code)"
    >
      <div class="fg-copy-icon"></div>
      <span class="fg-copy-toast">Copied!</span>
    </button>
  </div>
  <td-illustration
    class="fg-code-snippet fg-code-snippet-short"
    *ngIf="hasCodeSnippetIllustration(feature)"
    [illustration]="$any(feature.illustration)"
    [isBlurred]="feature.isIllustrationBlurred"
  />
</div>

<div *ngIf="illustration" class="fg-illustration-row card-padding">
  <td-illustration [illustration]="illustration" />
</div>
